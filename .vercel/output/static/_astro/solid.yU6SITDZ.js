const f={context:void 0,registry:void 0};function I(e){f.context=e}function he(){return{...f.context,id:`${f.context.id}${f.context.count++}-`,count:0}}const pe=(e,t)=>e===t,Z=Symbol("solid-proxy"),ge=Symbol("solid-track"),D={equals:pe};let se=ie;const O=1,H=2,ue={owned:null,cleanups:null,context:null,owner:null},W={};var a=null;let X=null,h=null,v=null,P=null,K=0;function Y(e,t){const n=h,r=a,u=e.length===0,s=t===void 0?r:t,l=u?ue:{owned:null,cleanups:null,context:s?s.context:null,owner:s},i=u?e:()=>e(()=>A(()=>z(l)));a=l,h=null;try{return N(i,!0)}finally{h=n,a=r}}function U(e,t){t=t?Object.assign({},D,t):D;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=u=>(typeof u=="function"&&(u=u(n.value)),oe(n,u));return[le.bind(n),r]}function ne(e,t,n){const r=q(e,t,!0,O);R(r)}function ye(e,t,n){const r=q(e,t,!1,O);R(r)}function we(e,t,n){se=Ee;const r=q(e,t,!1,O),u=ee&&xe(ee);u&&(r.suspense=u),(!n||!n.render)&&(r.user=!0),P?P.push(r):R(r)}function L(e,t,n){n=n?Object.assign({},D,n):D;const r=q(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,R(r),le.bind(r)}function be(e){return e&&typeof e=="object"&&"then"in e}function ve(e,t,n){let r,u,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,u=e,s=t||{}):(r=e,u=t,s=n||{});let l=null,i=W,d=null,c=!1,o="initialValue"in s,b=typeof r=="function"&&L(r);const p=new Set,[S,j]=(s.storage||U)(s.initialValue),[C,$]=U(void 0),[M,k]=U(void 0,{equals:!1}),[m,E]=U(o?"ready":"unresolved");if(f.context){d=`${f.context.id}${f.context.count++}`;let g;s.ssrLoadFrom==="initial"?i=s.initialValue:f.load&&(g=f.load(d))&&(i=g)}function x(g,y,w,T){return l===g&&(l=null,T!==void 0&&(o=!0),(g===i||y===i)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(T,{value:y})),i=W,B(y,w)),y}function B(g,y){N(()=>{y===void 0&&j(()=>g),E(y!==void 0?"errored":o?"ready":"unresolved"),$(y);for(const w of p.keys())w.decrement();p.clear()},!1)}function G(){const g=ee,y=S(),w=C();if(w!==void 0&&!l)throw w;return h&&!h.user&&g&&ne(()=>{M(),l&&(g.resolved||p.has(g)||(g.increment(),p.add(g)))}),y}function Q(g=!0){if(g!==!1&&c)return;c=!1;const y=b?b():r;if(y==null||y===!1){x(l,A(S));return}const w=i!==W?i:A(()=>u(y,{value:S(),refetching:g}));return be(w)?(l=w,"value"in w?(w.status==="success"?x(l,w.value,void 0,y):x(l,void 0,void 0,y),w):(c=!0,queueMicrotask(()=>c=!1),N(()=>{E(o?"refreshing":"pending"),k()},!1),w.then(T=>x(w,T,void 0,y),T=>x(w,void 0,ce(T),y)))):(x(l,w,void 0,y),w)}return Object.defineProperties(G,{state:{get:()=>m()},error:{get:()=>C()},loading:{get(){const g=m();return g==="pending"||g==="refreshing"}},latest:{get(){if(!o)return G();const g=C();if(g&&!l)throw g;return S()}}}),b?ne(()=>Q(!1)):Q(!1),[G,{refetch:Q,mutate:j}]}function Ie(e){return N(e,!1)}function A(e){if(h===null)return e();const t=h;h=null;try{return e()}finally{h=t}}function $e(e,t,n){const r=Array.isArray(e);let u,s=n&&n.defer;return l=>{let i;if(r){i=Array(e.length);for(let c=0;c<e.length;c++)i[c]=e[c]()}else i=e();if(s){s=!1;return}const d=A(()=>t(i,u,l));return u=i,d}}function Me(e){we(()=>A(e))}function me(e){return a===null||(a.cleanups===null?a.cleanups=[e]:a.cleanups.push(e)),e}function Te(){return h}function Ue(e,t){const n=Symbol("context");return{id:n,Provider:Ce(n),defaultValue:e}}function xe(e){return a&&a.context&&a.context[e.id]!==void 0?a.context[e.id]:e.defaultValue}function Ae(e){const t=L(e),n=L(()=>te(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let ee;function le(){if(this.sources&&this.state)if(this.state===O)R(this);else{const e=v;v=null,N(()=>F(this),!1),v=e}if(h){const e=this.observers?this.observers.length:0;h.sources?(h.sources.push(this),h.sourceSlots.push(e)):(h.sources=[this],h.sourceSlots=[e]),this.observers?(this.observers.push(h),this.observerSlots.push(h.sources.length-1)):(this.observers=[h],this.observerSlots=[h.sources.length-1])}return this.value}function oe(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&N(()=>{for(let u=0;u<e.observers.length;u+=1){const s=e.observers[u],l=X&&X.running;l&&X.disposed.has(s),(l?!s.tState:!s.state)&&(s.pure?v.push(s):P.push(s),s.observers&&fe(s)),l||(s.state=O)}if(v.length>1e6)throw v=[],new Error},!1)),t}function R(e){if(!e.fn)return;z(e);const t=K;Se(e,e.value,t)}function Se(e,t,n){let r;const u=a,s=h;h=a=e;try{r=e.fn(t)}catch(l){return e.pure&&(e.state=O,e.owned&&e.owned.forEach(z),e.owned=null),e.updatedAt=n+1,ae(l)}finally{h=s,a=u}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?oe(e,r):e.value=r,e.updatedAt=n)}function q(e,t,n,r=O,u){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:a,context:a?a.context:null,pure:n};return a===null||a!==ue&&(a.owned?a.owned.push(s):a.owned=[s]),s}function _(e){if(e.state===0)return;if(e.state===H)return F(e);if(e.suspense&&A(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<K);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===O)R(e);else if(e.state===H){const r=v;v=null,N(()=>F(e,t[0]),!1),v=r}}function N(e,t){if(v)return e();let n=!1;t||(v=[]),P?n=!0:P=[],K++;try{const r=e();return ke(n),r}catch(r){n||(P=null),v=null,ae(r)}}function ke(e){if(v&&(ie(v),v=null),e)return;const t=P;P=null,t.length&&N(()=>se(t),!1)}function ie(e){for(let t=0;t<e.length;t++)_(e[t])}function Ee(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:_(r)}if(f.context){if(f.count){f.effects||(f.effects=[]),f.effects.push(...e.slice(0,n));return}else f.effects&&(e=[...f.effects,...e],n+=f.effects.length,delete f.effects);I()}for(t=0;t<n;t++)_(e[t])}function F(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const u=r.state;u===O?r!==t&&(!r.updatedAt||r.updatedAt<K)&&_(r):u===H&&F(r,t)}}}function fe(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=H,n.pure?v.push(n):P.push(n),n.observers&&fe(n))}}function z(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),u=n.observers;if(u&&u.length){const s=u.pop(),l=n.observerSlots.pop();r<u.length&&(s.sourceSlots[l]=r,u[r]=s,n.observerSlots[r]=l)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)z(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ce(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ae(e,t=a){throw ce(e)}function te(e){if(typeof e=="function"&&!e.length)return te(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=te(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Ce(e,t){return function(r){let u;return ye(()=>u=A(()=>(a.context={...a.context,[e]:r.value},Ae(()=>r.children))),void 0),u}}const Pe=Symbol("fallback");function re(e){for(let t=0;t<e.length;t++)e[t]()}function Oe(e,t,n={}){let r=[],u=[],s=[],l=0,i=t.length>1?[]:null;return me(()=>re(s)),()=>{let d=e()||[],c,o;return d[ge],A(()=>{let p=d.length,S,j,C,$,M,k,m,E,x;if(p===0)l!==0&&(re(s),s=[],r=[],u=[],l=0,i&&(i=[])),n.fallback&&(r=[Pe],u[0]=Y(B=>(s[0]=B,n.fallback())),l=1);else if(l===0){for(u=new Array(p),o=0;o<p;o++)r[o]=d[o],u[o]=Y(b);l=p}else{for(C=new Array(p),$=new Array(p),i&&(M=new Array(p)),k=0,m=Math.min(l,p);k<m&&r[k]===d[k];k++);for(m=l-1,E=p-1;m>=k&&E>=k&&r[m]===d[E];m--,E--)C[E]=u[m],$[E]=s[m],i&&(M[E]=i[m]);for(S=new Map,j=new Array(E+1),o=E;o>=k;o--)x=d[o],c=S.get(x),j[o]=c===void 0?-1:c,S.set(x,o);for(c=k;c<=m;c++)x=r[c],o=S.get(x),o!==void 0&&o!==-1?(C[o]=u[c],$[o]=s[c],i&&(M[o]=i[c]),o=j[o],S.set(x,o)):s[c]();for(o=k;o<p;o++)o in C?(u[o]=C[o],s[o]=$[o],i&&(i[o]=M[o],i[o](o))):u[o]=Y(b);u=u.slice(0,l=p),r=d.slice(0)}return u});function b(p){if(s[o]=p,i){const[S,j]=U(o);return i[o]=j,t(d[o],S)}return t(d[o])}}}let de=!1;function Re(){de=!0}function Ve(e,t){if(de&&f.context){const n=f.context;I(he());const r=A(()=>e(t||{}));return I(n),r}return A(()=>e(t||{}))}function V(){return!0}const je={get(e,t,n){return t===Z?n:e.get(t)},has(e,t){return t===Z?!0:e.has(t)},set:V,deleteProperty:V,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:V,deleteProperty:V}},ownKeys(e){return e.keys()}};function J(e){return(e=typeof e=="function"?e():e)?e:{}}function Le(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function De(...e){let t=!1;for(let s=0;s<e.length;s++){const l=e[s];t=t||!!l&&Z in l,e[s]=typeof l=="function"?(t=!0,L(l)):l}if(t)return new Proxy({get(s){for(let l=e.length-1;l>=0;l--){const i=J(e[l])[s];if(i!==void 0)return i}},has(s){for(let l=e.length-1;l>=0;l--)if(s in J(e[l]))return!0;return!1},keys(){const s=[];for(let l=0;l<e.length;l++)s.push(...Object.keys(J(e[l])));return[...new Set(s)]}},je);const n={},r={},u=new Set;for(let s=e.length-1;s>=0;s--){const l=e[s];if(!l)continue;const i=Object.getOwnPropertyNames(l);for(let d=0,c=i.length;d<c;d++){const o=i[d];if(o==="__proto__"||o==="constructor")continue;const b=Object.getOwnPropertyDescriptor(l,o);if(!u.has(o))b.get?(u.add(o),Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:Le.bind(r[o]=[b.get.bind(l)])})):(b.value!==void 0&&u.add(o),n[o]=b.value);else{const p=r[o];p?b.get?p.push(b.get.bind(l)):b.value!==void 0&&p.push(()=>b.value):n[o]===void 0&&(n[o]=b.value)}}}return n}function He(e){let t,n;const r=u=>{const s=f.context;if(s){const[i,d]=U();f.count||(f.count=0),f.count++,(n||(n=e())).then(c=>{I(s),f.count--,d(()=>c.default),I()}),t=i}else if(!t){const[i]=ve(()=>(n||(n=e())).then(d=>d.default));t=i}let l;return L(()=>(l=t())&&A(()=>{if(!s)return l(u);const i=f.context;I(s);const d=l(u);return I(i),d}))};return r.preload=()=>n||((n=e()).then(u=>t=()=>u.default),n),r}const Ne=e=>`Stale read from <${e}>.`;function _e(e){const t="fallback"in e&&{fallback:()=>e.fallback};return L(Oe(()=>e.each,e.children,t||void 0))}function Fe(e){const t=e.keyed,n=L(()=>e.when,void 0,{equals:(r,u)=>t?r===u:!r==!u});return L(()=>{const r=n();if(r){const u=e.children;return typeof u=="function"&&u.length>0?A(()=>u(t?r:()=>{if(!A(n))throw Ne("Show");return e.when})):u}return e.fallback},void 0,void 0)}export{Z as $,_e as F,Fe as S,ge as a,Ie as b,U as c,we as d,Ve as e,Ue as f,Te as g,$e as h,Y as i,ye as j,A as k,He as l,Re as m,ve as n,Me as o,De as p,L as q,f as s,xe as u};
