import{c as d,d as v,h as $,n as h}from"./solid.yU6SITDZ.js";let s=[],y=(t,r)=>{let c=[],l={get(){return l.lc||l.listen(()=>{})(),l.value},l:r||0,lc:0,listen(a,o){return l.lc=c.push(a,o||l.l)/2,()=>{let e=c.indexOf(a);~e&&(c.splice(e,2),--l.lc)}},notify(a){let o=!s.length;for(let e=0;e<c.length;e+=2)s.push(c[e],c[e+1],l.value,a);if(o){for(let e=0;e<s.length;e+=4){let u;for(let m=e+1;!u&&(m+=4)<s.length;)s[m]<s[e+1]&&(u=s.push(s[e],s[e+1],s[e+2],s[e+3]));u||s[e](s[e+2],s[e+3])}s.length=0}},off(){},set(a){l.value!==a&&(l.value=a,l.notify())},subscribe(a,o){let e=l.listen(a,o);return a(l.value),e},value:t};return l};const j=d(1),[n,S]=j;v($(n,()=>{console.log(n()),n()>=1&&f.lst[1].refetch()},{defer:!0}));const V=d(1),[i,b]=V;v($(i,()=>{i()>=1&&f.scm[1].refetch()},{defer:!0}));const D={lst:n,scm:i},L={lst:t=>S(t),scm:t=>b(t)},q={lst:t=>S(n()+t>1?n()+t:1),scm:t=>b(i()+t>1?i()+t:1)},p={$lst:async t=>(await fetch(`/api/query?limit=${t}`)).json(),$scm:async t=>(await fetch(`/api/query?opt=scene_monitoring&limit=${t}`)).json()},f={lst:h(n,p.$lst,{initialValue:[]}),scm:h(i,p.$scm,{initialValue:[]})},g=y(""),w=()=>g.get(),E=t=>g.set(t);g.subscribe(t=>Object.values(f).forEach(r=>r[1].refetch()));export{w as a,f as d,D as g,L as l,q as n,E as s};
